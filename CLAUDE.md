# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

このファイルは、このリポジトリのコードを扱う際のClaude Code (claude.ai/code) へのガイダンスを提供します。

## プロジェクト概要

このリポジトリには、複数の独立したWebアプリケーションとデータ分析レポートが含まれています。すべてのWebアプリケーションは単一ファイルのスタンドアロンHTMLファイルとして実装されており、日本語インターフェースを提供します。

## アーキテクチャ

### プロジェクト構造
```
/
├── index.html               # アプリケーション一覧ページ
├── *.html                   # 独立したWebアプリケーション
├── img_shooting/            # シューティングゲーム用画像アセット
│   ├── img00.png           # プレイヤーキャラクター画像
│   ├── img01.png           # 敵キャラクター画像1
│   └── img02.png           # 敵キャラクター画像2
├── *.md                    # 分析レポート・ドキュメント
├── CLAUDE.md               # Claude Code開発ガイド
└── application_sequence_diagram.md  # 処理フロー仕様
```

### 依存関係
- **外部CDN**: Chart.js（株価分析アプリのみ）
- **ブラウザAPI**: localStorage、DOM API
- **ビルドツール**: なし（すべて単一ファイル構成）

### 共通技術スタック
- **フロントエンド**: 単一ファイルでのバニラHTML/CSS/JavaScript
- **データストレージ**: ブラウザlocalStorage（永続化が必要なアプリケーション）
- **スタイリング**: レスポンシブデザイン、CSS Grid、グラデーション背景、モダンなUI要素
- **国際化**: 日本語UI、日本のフォントスタック使用

### アプリケーション構成

#### 1. 夏休みスケジュール管理 (`summer_schedule.html`)
- **機能**: スケジュールCRUD操作、カテゴリベース整理、統計表示
- **データ管理**: localStorageによる永続化
- **カテゴリ**: 勉強、遊び、旅行、趣味、家族

#### 2. 株価分析アプリ (`stock_analyzer.html`)
- **機能**: 株価データの可視化・分析
- **UI特徴**: グラデーション背景、モダンなカードレイアウト

#### 3. 出生数・待機児童数分析インフォグラフィック (`birth_waiting_children_infographic.html`)
- **機能**: 政策データの視覚化、国際比較、タイムライン表示
- **特徴**: 詳細なCSS視覚化、レスポンシブ対応、統計バッジシステム

#### 4. ゲームアプリケーション群

##### テニスゲーム (`tennis_game.html`)
- **機能**: プレイヤー vs AI対戦、マルチボールシステム
- **ゲーム特徴**: 10秒ごとにボール追加、複数ボール同時処理、AI予測システム
- **操作**: W/S または矢印キーでパドル操作、スペースキーでゲーム開始

##### シューティングゲーム (`shooting_game.html`)
- **機能**: 敵機撃墜ゲーム、画像ベースキャラクター、スコアシステム
- **ゲーム特徴**: Canvas描画、衝突判定、爆発エフェクト、残像効果
- **操作**: 矢印キーで移動、スペースキーで弾丸発射
- **画像アセット**: `img_shooting/` フォルダ内の画像を使用（img00.png：プレイヤー、img01.png/img02.png：敵）

##### ボンバーゲーム (`bomber_game.html`)
- **機能**: 爆弾設置アクションゲーム
- **操作**: 爆弾を設置して敵を倒すゲームプレイ

##### オセロゲーム (`othello_game.html`)
- **機能**: クラシックなオセロゲーム
- **対戦**: コンピューター対戦機能

### 分析レポート

#### 出生数・待機児童数関係性レポート (`birth_and_waiting_children_report.md`)
- **内容**: 2004-2024年の包括的政策分析、国際比較、地域格差分析
- **データソース**: 厚生労働省、こども家庭庁、内閣府等の公式統計

## 開発パターン

### 新しいWebアプリケーション作成時
1. **単一ファイル形式**: すべてのCSS・JavaScriptを埋め込み
2. **日本語対応**: フォントスタック `'Hiragino Sans', 'Hiragino Kaku Gothic Pro', 'Yu Gothic', 'Meiryo'`
3. **レスポンシブデザイン**: モバイルファーストアプローチ
4. **視覚的一貫性**: グラデーション背景、カードレイアウト、影効果
5. **index.htmlへの登録**: 新しいアプリケーションを作成したら、必ず `index.html` のアプリケーション一覧に項目を追加する

### ゲーム開発時
- **Canvas使用**: シューティングゲームなどではHTML5 Canvasを使用した描画
- **画像アセット管理**: 画像ファイルは専用フォルダに整理（例：`img_shooting/`）
- **入力処理**: キーボードイベントによるリアルタイム操作
- **ゲームループ**: requestAnimationFrameを使用した滑らかなアニメーション
- **衝突判定**: 矩形ベースの衝突検出アルゴリズム

### インフォグラフィック開発時
- **セクション構造**: ヘッダー、メイン統計、詳細分析、国際比較、政策提言
- **視覚化要素**: バーチャート、タイムライン、統計バッジ、地域比較表
- **アクセシビリティ**: 色分けによる情報整理、明確な階層構造

### データ分析レポート作成時
- **構造**: エグゼクティブサマリー、詳細分析、政策的含意、国際比較、結論
- **データ出典**: 信頼できる政府統計機関のデータを必須記載
- **分析期間**: 明確な対象期間設定と最終更新日記載

## 実行方法

すべてのHTMLアプリケーションは、Webブラウザで直接開くだけで動作します。ビルドプロセスやサーバーは不要です。

### 開発・テスト時の実行コマンド
```bash
# HTMLファイルをブラウザで開く
open index.html                    # アプリケーション一覧を表示
open summer_schedule.html          # macOS
open stock_analyzer.html           # macOS
open birth_waiting_children_infographic.html  # macOS
open tennis_game.html              # macOS
open shooting_game.html            # macOS
open bomber_game.html              # macOS
open othello_game.html             # macOS

# または直接ブラウザでファイルを開く
```

### デバッグ方法
- ブラウザの開発者ツール（F12）でConsoleタブを使用
- localStorageの確認: `localStorage.getItem('schedules')`
- エラーログの確認: Console内でJavaScriptエラーを監視

### 動作確認・テスト手順
1. **スケジュール管理アプリ**: 
   - 新規スケジュール追加→保存→リロード後の永続化確認
   - 各カテゴリでの追加・削除・統計更新確認
2. **株価分析アプリ**:
   - 各銘柄コードでの分析実行→チャート表示確認
   - 期間・間隔設定の動作確認
3. **インフォグラフィック**:
   - 各ブラウザ・デバイスサイズでのレスポンシブ表示確認
   - 印刷時のレイアウト確認
4. **ゲームアプリケーション**:
   - **テニスゲーム**: キーボード操作（W/S、矢印キー）、マルチボール機能、AI対戦
   - **シューティングゲーム**: 矢印キー移動、スペースキー射撃、画像読み込み、衝突判定
   - **ボンバーゲーム**: ゲームプレイ動作確認
   - **オセロゲーム**: コンピューター対戦機能確認

## 開発時の注意点

### コードスタイル
- **JavaScript**: ES6+構文を使用、関数型プログラミングパターンを採用
- **CSS**: CSS Grid、Flexbox、CSS変数を積極活用
- **HTML**: セマンティックHTML5要素を使用、アクセシビリティ対応

### データ管理パターン
- **localStorage**: JSONシリアル化でオブジェクト保存
- **状態管理**: 単一の状態オブジェクトによる管理
- **イベント処理**: delegationパターンを使用してメモリ効率化

### UI/UXガイドライン
- **カラーパレット**: プライマリ色として青系グラデーション統一
- **タイポグラフィ**: 日本語可読性を重視したフォント選択
- **インタラクション**: ホバー効果、アニメーション、フィードバック重視

## アプリケーション処理フロー

各アプリケーションの詳細な処理シーケンスについては、@application_sequence_diagram.md を参照してください。

### 処理フロー概要
- **初期化パターン**: localStorage読み込み → データ処理 → UI表示
- **CRUD操作**: バリデーション → データ更新 → 永続化 → UI再描画
- **可視化処理**: データ変換 → Chart.js/CSS描画 → レスポンシブ調整
- **エラーハンドリング**: 入力検証 → ユーザーフィードバック → 状態復旧

各アプリケーション固有の処理詳細、共通パターン、アーキテクチャ特徴は@application_sequence_diagram.mdで包括的に説明されています。