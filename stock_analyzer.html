<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ªä¾¡åˆ†æã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .input-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        label {
            color: white;
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }

        input, select, button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
        }

        input, select {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
        }

        button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .analysis-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #4facfe;
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .stat-value {
            font-weight: bold;
            color: #4facfe;
        }

        .positive {
            color: #27ae60;
        }

        .negative {
            color: #e74c3c;
        }

        .chart-container {
            width: 100%;
            height: 400px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        #priceChart {
            width: 100%;
            height: 100%;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ˆ æ ªä¾¡åˆ†æã‚¢ãƒ—ãƒª</h1>
        
        <div class="input-section">
            <div class="input-group">
                <div>
                    <label for="stockSymbol">éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰/ã‚·ãƒ³ãƒœãƒ«</label>
                    <input type="text" id="stockSymbol" placeholder="ä¾‹: AAPL, GOOGL, 7203.T" value="7203" oninput="showCompanyName()">
                    <div id="companyName" style="color: white; font-size: 14px; margin-top: 5px; font-weight: normal;"></div>
                </div>
                <div>
                    <label for="period">æœŸé–“</label>
                    <select id="period">
                        <option value="1d">1æ—¥</option>
                        <option value="5d">5æ—¥</option>
                        <option value="1mo" selected>1ãƒ¶æœˆ</option>
                        <option value="3mo">3ãƒ¶æœˆ</option>
                        <option value="6mo">6ãƒ¶æœˆ</option>
                        <option value="1y">1å¹´</option>
                        <option value="2y">2å¹´</option>
                    </select>
                </div>
                <div>
                    <label for="interval">é–“éš”</label>
                    <select id="interval">
                        <option value="1m">1åˆ†</option>
                        <option value="5m">5åˆ†</option>
                        <option value="15m">15åˆ†</option>
                        <option value="30m">30åˆ†</option>
                        <option value="1h">1æ™‚é–“</option>
                        <option value="1d" selected>1æ—¥</option>
                        <option value="1wk">1é€±é–“</option>
                    </select>
                </div>
            </div>
            <button onclick="analyzeStock()">ğŸ“Š æ ªä¾¡ã‚’åˆ†æ</button>
        </div>

        <div id="loadingDiv" class="loading" style="display: none;">
            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
        </div>

        <div id="errorDiv" class="error" style="display: none;"></div>

        <div id="resultsSection" style="display: none;">
            <div class="chart-container">
                <canvas id="priceChart"></canvas>
            </div>

            <div class="analysis-section">
                <div class="card">
                    <h3>ğŸ’° ä¾¡æ ¼æƒ…å ±</h3>
                    <div id="priceInfo"></div>
                </div>

                <div class="card">
                    <h3>ğŸ“Š çµ±è¨ˆæƒ…å ±</h3>
                    <div id="statsInfo"></div>
                </div>

                <div class="card">
                    <h3>ğŸ“ˆ ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ</h3>
                    <div id="trendInfo"></div>
                </div>

                <div class="card">
                    <h3>ğŸ¯ ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™</h3>
                    <div id="technicalInfo"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let priceChart = null;

        // æ—¥æœ¬ã®ä¸»è¦éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¨ä¼šç¤¾åã®ãƒãƒƒãƒ”ãƒ³ã‚°
        const japaneseStocks = {
            '1301': 'æ¥µæ´‹',
            '1332': 'æ—¥æœ¬æ°´ç”£',
            '1333': 'ãƒãƒ«ãƒãƒ‹ãƒãƒ­',
            '1605': 'å›½éš›çŸ³æ²¹é–‹ç™ºå¸çŸ³',
            '1721': 'ã‚³ãƒ ã‚·ã‚¹ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '1801': 'å¤§æˆå»ºè¨­',
            '1802': 'å¤§æ—çµ„',
            '1803': 'æ¸…æ°´å»ºè¨­',
            '1812': 'é¹¿å³¶å»ºè¨­',
            '1925': 'å¤§å’Œãƒã‚¦ã‚¹å·¥æ¥­',
            '1928': 'ç©æ°´ãƒã‚¦ã‚¹',
            '1963': 'æ—¥æ®ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '2269': 'æ˜æ²»ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '2282': 'NHK',
            '2432': 'ãƒ‡ã‚£ãƒ¼ãƒ»ã‚¨ãƒŒãƒ»ã‚¨ãƒ¼',
            '2501': 'ã‚µãƒƒãƒãƒ­ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '2502': 'ã‚¢ã‚µãƒ’ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '2503': 'ã‚­ãƒªãƒ³ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '2801': 'ã‚­ãƒƒã‚³ãƒ¼ãƒãƒ³',
            '2802': 'å‘³ã®ç´ ',
            '2871': 'ãƒ‹ãƒãƒ¬ã‚¤',
            '2914': 'æ—¥æœ¬ãŸã°ã“ç”£æ¥­',
            '3086': 'J.ãƒ•ãƒ­ãƒ³ãƒˆ ãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°',
            '3099': 'ä¸‰è¶Šä¼Šå‹¢ä¸¹ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '3382': 'ä¸ƒåä¸ƒéŠ€è¡Œ',
            '3401': 'å¸äºº',
            '3402': 'æ±ãƒ¬',
            '3407': 'æ—­åŒ–æˆ',
            '3436': 'SUMCO',
            '4004': 'æ˜­å’Œé›»å·¥',
            '4005': 'ä½å‹åŒ–å­¦',
            '4021': 'æ—¥ç”£åŒ–å­¦',
            '4043': 'ãƒˆã‚¯ãƒ¤ãƒ',
            '4061': 'ãƒ‡ãƒ³ã‚«',
            '4063': 'ä¿¡è¶ŠåŒ–å­¦å·¥æ¥­',
            '4183': 'ä¸‰äº•åŒ–å­¦',
            '4188': 'ä¸‰è±ã‚±ãƒŸã‚«ãƒ«ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '4208': 'å®‡éƒ¨èˆˆç”£',
            '4272': 'æ—¥æœ¬åŒ–è–¬',
            '4307': 'é‡æ‘ç·åˆç ”ç©¶æ‰€',
            '4324': 'é›»é€šã‚°ãƒ«ãƒ¼ãƒ—',
            '4443': 'Sansan',
            '4452': 'èŠ±ç‹',
            '4503': 'ã‚¢ã‚¹ãƒ†ãƒ©ã‚¹è£½è–¬',
            '4506': 'å¤§æ—¥æœ¬ä½å‹è£½è–¬',
            '4507': 'å¡©é‡ç¾©è£½è–¬',
            '4519': 'ä¸­å¤–è£½è–¬',
            '4523': 'ã‚¨ãƒ¼ã‚¶ã‚¤',
            '4568': 'ç¬¬ä¸€ä¸‰å…±',
            '4578': 'å¤§å¡šãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '4612': 'æ—¥æœ¬ãƒšã‚¤ãƒ³ãƒˆãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '4613': 'é–¢è¥¿ãƒšã‚¤ãƒ³ãƒˆ',
            '4631': 'DIC',
            '4689': 'ãƒ¤ãƒ•ãƒ¼',
            '4704': 'ãƒˆãƒ¬ãƒ³ãƒ‰ãƒã‚¤ã‚¯ãƒ­',
            '4755': 'æ¥½å¤©ã‚°ãƒ«ãƒ¼ãƒ—',
            '4901': 'å¯Œå£«ãƒ•ã‚¤ãƒ«ãƒ ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '4911': 'è³‡ç”Ÿå ‚',
            '5019': 'ã‚­ãƒ³ã‚°ãƒ»ã‚½ãƒ•ã‚£ã‚¢',
            '5101': 'æ¨ªæµœã‚´ãƒ ',
            '5108': 'ãƒ–ãƒªãƒ‚ã‚¹ãƒˆãƒ³',
            '5201': 'AGC',
            '5214': 'æ—¥æœ¬é›»æ°—ç¡å­',
            '5232': 'ä½å‹å¤§é˜ªã‚»ãƒ¡ãƒ³ãƒˆ',
            '5301': 'æ±æµ·ã‚«ãƒ¼ãƒœãƒ³',
            '5332': 'TOTO',
            '5333': 'æ—¥æœ¬ã‚¬ã‚¤ã‚·',
            '5401': 'æ—¥æœ¬è£½é‰„',
            '5406': 'ç¥æˆ¸è£½é‹¼æ‰€',
            '5411': 'JFEãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '5541': 'å¤§å¹³æ´‹é‡‘å±',
            '5631': 'æ—¥æœ¬è£½é‹¼æ‰€',
            '5632': 'ä¸‰è±è£½é‹¼',
            '5703': 'æ—¥æœ¬è»½é‡‘å±ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '5706': 'ä¸‰äº•é‡‘å±é‰±æ¥­',
            '5707': 'æ±é‚¦äºœé‰›',
            '5711': 'ä¸‰è±ãƒãƒ†ãƒªã‚¢ãƒ«',
            '5713': 'ä½å‹é‡‘å±é‰±å±±',
            '5714': 'DOWA ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '5801': 'å¤æ²³é›»æ°—å·¥æ¥­',
            '5802': 'ä½å‹é›»æ°—å·¥æ¥­',
            '5803': 'ãƒ•ã‚¸ã‚¯ãƒ©',
            '5901': 'æ±æ´‹è£½ç½ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '5947': 'ãƒªãƒ³ãƒŠã‚¤',
            '5949': 'ãƒ¦ãƒ‹ãƒ—ãƒ¬ã‚¹',
            '6103': 'ã‚ªãƒ¼ã‚¯ãƒ',
            '6113': 'ã‚¢ãƒãƒ€',
            '6134': 'FUJI',
            '6136': 'ã‚ªãƒ¼ã‚¨ã‚¹ã‚¸ãƒ¼',
            '6141': 'DMGæ£®ç²¾æ©Ÿ',
            '6146': 'ãƒ‡ã‚£ã‚¹ã‚³',
            '6178': 'æ—¥æœ¬éƒµæ”¿',
            '6273': 'SMC',
            '6301': 'ã‚³ãƒãƒ„',
            '6302': 'ä½å‹é‡æ©Ÿæ¢°å·¥æ¥­',
            '6305': 'æ—¥ç«‹å»ºæ©Ÿ',
            '6326': 'ã‚¯ãƒœã‚¿',
            '6361': 'èåŸè£½ä½œæ‰€',
            '6366': 'åƒä»£ç”°åŒ–å·¥å»ºè¨­',
            '6367': 'ãƒ€ã‚¤ã‚­ãƒ³å·¥æ¥­',
            '6370': 'ãƒŸãƒ¤ã‚¶ã‚­',
            '6471': 'æ—¥æœ¬ç²¾å·¥',
            '6472': 'NTN',
            '6473': 'ã‚¸ã‚§ã‚¤ãƒ†ã‚¯ãƒˆ',
            '6479': 'ãƒŸãƒãƒ™ã‚¢ãƒŸãƒ„ãƒŸ',
            '6501': 'æ—¥ç«‹è£½ä½œæ‰€',
            '6502': 'æ±èŠ',
            '6503': 'ä¸‰è±é›»æ©Ÿ',
            '6504': 'å¯Œå£«é›»æ©Ÿ',
            '6506': 'å®‰å·é›»æ©Ÿ',
            '6588': 'æ±èŠãƒ†ãƒƒã‚¯',
            '6592': 'ãƒãƒ–ãƒãƒ¢ãƒ¼ã‚¿ãƒ¼',
            '6594': 'æ—¥æœ¬é›»ç”£',
            '6702': 'å¯Œå£«é€š',
            '6723': 'ãƒ«ãƒã‚µã‚¹ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹',
            '6724': 'ã‚»ã‚¤ã‚³ãƒ¼ã‚¨ãƒ—ã‚½ãƒ³',
            '6752': 'ãƒ‘ãƒŠã‚½ãƒ‹ãƒƒã‚¯ ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '6758': 'ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—',
            '6762': 'TDK',
            '6770': 'ã‚¢ãƒ«ãƒ—ã‚¹ã‚¢ãƒ«ãƒ‘ã‚¤ãƒ³',
            '6806': 'ãƒ’ãƒ­ã‚»é›»æ©Ÿ',
            '6841': 'æ¨ªæ²³é›»æ©Ÿ',
            '6856': 'å €å ´è£½ä½œæ‰€',
            '6857': 'ã‚¢ãƒ‰ãƒãƒ³ãƒ†ã‚¹ãƒˆ',
            '6861': 'ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹',
            '6902': 'ãƒ‡ãƒ³ã‚½ãƒ¼',
            '6952': 'ã‚«ã‚·ã‚ªè¨ˆç®—æ©Ÿ',
            '6954': 'ãƒ•ã‚¡ãƒŠãƒƒã‚¯',
            '6971': 'äº¬ã‚»ãƒ©',
            '6976': 'å¤ªé™½èª˜é›»',
            '6981': 'æ‘ç”°è£½ä½œæ‰€',
            '7003': 'ä¸‰äº•E&Sãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '7011': 'ä¸‰è±é‡å·¥æ¥­',
            '7012': 'ã‚«ãƒ¯ã‚µã‚­ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚¹',
            '7013': 'IHI',
            '7201': 'æ—¥ç”£è‡ªå‹•è»Š',
            '7202': 'ã„ã™ã‚è‡ªå‹•è»Š',
            '7203': 'ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š',
            '7205': 'æ—¥é‡è‡ªå‹•è»Š',
            '7211': 'ä¸‰è±è‡ªå‹•è»Šå·¥æ¥­',
            '7261': 'ãƒãƒ„ãƒ€',
            '7267': 'ãƒ›ãƒ³ãƒ€',
            '7269': 'ã‚¹ã‚ºã‚­',
            '7270': 'SUBARU',
            '7731': 'ãƒ‹ã‚³ãƒ³',
            '7732': 'ãƒˆãƒ—ã‚³ãƒ³',
            '7733': 'ã‚ªãƒªãƒ³ãƒ‘ã‚¹',
            '7741': 'HOYA',
            '7751': 'ã‚­ãƒ¤ãƒãƒ³',
            '7832': 'ãƒãƒ³ãƒ€ã‚¤ãƒŠãƒ ã‚³ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '7911': 'å‡¸ç‰ˆå°åˆ·',
            '7912': 'å¤§æ—¥æœ¬å°åˆ·',
            '8001': 'ä¼Šè—¤å¿ å•†äº‹',
            '8002': 'ä¸¸ç´…',
            '8015': 'è±Šç”°é€šå•†',
            '8031': 'ä¸‰äº•ç‰©ç”£',
            '8053': 'ä½å‹å•†äº‹',
            '8058': 'ä¸‰è±å•†äº‹',
            '8233': 'é«˜å³¶å±‹',
            '8267': 'ã‚¤ã‚ªãƒ³',
            '8270': 'ãƒ¦ãƒ‹ãƒ¼ãƒ»ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '8306': 'ä¸‰è±UFJãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—',
            '8308': 'ã‚Šããªãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '8316': 'ä¸‰äº•ä½å‹ãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—',
            '8411': 'ã¿ãšã»ãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—',
            '8570': 'ã‚¤ã‚ªãƒ³ãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚µãƒ¼ãƒ“ã‚¹',
            '8604': 'é‡æ‘ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '8628': 'æ¾äº•è¨¼åˆ¸',
            '8750': 'ç¬¬ä¸€ç”Ÿå‘½ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '8766': 'æ±äº¬æµ·ä¸Šãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '8795': 'T&Dãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '9022': 'æ±æµ·æ—…å®¢é‰„é“',
            '9062': 'æ—¥æœ¬é€šé‹',
            '9107': 'å·å´æ±½èˆ¹',
            '9202': 'ANA ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '9301': 'ä¸‰è±å€‰åº«',
            '9412': 'ã‚¹ã‚«ãƒ‘ãƒ¼JSATãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '9432': 'NTT',
            '9433': 'KDDI',
            '9434': 'ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯',
            '9437': 'NTTãƒ‰ã‚³ãƒ¢',
            '9501': 'æ±äº¬é›»åŠ›ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '9502': 'ä¸­éƒ¨é›»åŠ›',
            '9503': 'é–¢è¥¿é›»åŠ›',
            '9531': 'æ±äº¬ã‚¬ã‚¹',
            '9532': 'å¤§é˜ªã‚¬ã‚¹',
            '9602': 'æ±å®',
            '9613': 'NTTãƒ‡ãƒ¼ã‚¿',
            '9684': 'ã‚¹ã‚¯ã‚¦ã‚§ã‚¢ãƒ»ã‚¨ãƒ‹ãƒƒã‚¯ã‚¹ãƒ»ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹',
            '9766': 'ã‚³ãƒŠãƒŸã‚°ãƒ«ãƒ¼ãƒ—',
            '9983': 'ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°',
            '9984': 'ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—'
        };

        // ã‚¢ãƒ¡ãƒªã‚«ã®ä¸»è¦éŠ˜æŸ„
        const americanStocks = {
            'AAPL': 'Apple Inc.',
            'MSFT': 'Microsoft Corporation',
            'GOOGL': 'Alphabet Inc.',
            'GOOG': 'Alphabet Inc.',
            'AMZN': 'Amazon.com Inc.',
            'TSLA': 'Tesla Inc.',
            'META': 'Meta Platforms Inc.',
            'NVDA': 'NVIDIA Corporation',
            'BRK.A': 'Berkshire Hathaway Inc.',
            'BRK.B': 'Berkshire Hathaway Inc.',
            'V': 'Visa Inc.',
            'JNJ': 'Johnson & Johnson',
            'WMT': 'Walmart Inc.',
            'JPM': 'JPMorgan Chase & Co.',
            'MA': 'Mastercard Incorporated',
            'PG': 'Procter & Gamble Company',
            'UNH': 'UnitedHealth Group Incorporated',
            'HD': 'Home Depot Inc.',
            'PYPL': 'PayPal Holdings Inc.',
            'BAC': 'Bank of America Corporation',
            'DIS': 'Walt Disney Company',
            'ADBE': 'Adobe Inc.',
            'CMCSA': 'Comcast Corporation',
            'NFLX': 'Netflix Inc.',
            'KO': 'Coca-Cola Company',
            'NKE': 'Nike Inc.',
            'XOM': 'Exxon Mobil Corporation',
            'VZ': 'Verizon Communications Inc.',
            'INTC': 'Intel Corporation',
            'PFE': 'Pfizer Inc.',
            'T': 'AT&T Inc.',
            'MRK': 'Merck & Co. Inc.',
            'CRM': 'Salesforce Inc.',
            'ABT': 'Abbott Laboratories',
            'ACN': 'Accenture plc',
            'COST': 'Costco Wholesale Corporation',
            'TMO': 'Thermo Fisher Scientific Inc.',
            'AVGO': 'Broadcom Inc.',
            'DHR': 'Danaher Corporation',
            'TXN': 'Texas Instruments Incorporated',
            'NEE': 'NextEra Energy Inc.',
            'LLY': 'Eli Lilly and Company',
            'WFC': 'Wells Fargo & Company',
            'ORCL': 'Oracle Corporation',
            'CVX': 'Chevron Corporation',
            'QCOM': 'QUALCOMM Incorporated',
            'MDT': 'Medtronic plc',
            'UPS': 'United Parcel Service Inc.',
            'IBM': 'International Business Machines Corporation',
            'C': 'Citigroup Inc.',
            'LIN': 'Linde plc',
            'LOW': 'Lowe\'s Companies Inc.',
            'HON': 'Honeywell International Inc.',
            'AMAT': 'Applied Materials Inc.',
            'PM': 'Philip Morris International Inc.',
            'SBUX': 'Starbucks Corporation',
            'CAT': 'Caterpillar Inc.',
            'GS': 'Goldman Sachs Group Inc.',
            'DE': 'Deere & Company',
            'AMD': 'Advanced Micro Devices Inc.',
            'ISRG': 'Intuitive Surgical Inc.',
            'SPGI': 'S&P Global Inc.',
            'BKNG': 'Booking Holdings Inc.',
            'INTU': 'Intuit Inc.',
            'NOW': 'ServiceNow Inc.',
            'GILD': 'Gilead Sciences Inc.',
            'AMGN': 'Amgen Inc.',
            'SYK': 'Stryker Corporation',
            'TGT': 'Target Corporation',
            'AXP': 'American Express Company',
            'MO': 'Altria Group Inc.',
            'VRTX': 'Vertex Pharmaceuticals Incorporated',
            'CVS': 'CVS Health Corporation',
            'LRCX': 'Lam Research Corporation',
            'ZTS': 'Zoetis Inc.',
            'REGN': 'Regeneron Pharmaceuticals Inc.',
            'BLK': 'BlackRock Inc.',
            'MMM': '3M Company',
            'ADI': 'Analog Devices Inc.',
            'BA': 'Boeing Company',
            'MDLZ': 'Mondelez International Inc.',
            'CI': 'Cigna Corporation',
            'CHTR': 'Charter Communications Inc.',
            'MU': 'Micron Technology Inc.',
            'CB': 'Chubb Limited',
            'SO': 'Southern Company',
            'DUK': 'Duke Energy Corporation',
            'ZM': 'Zoom Video Communications Inc.',
            'PLD': 'Prologis Inc.',
            'CCI': 'Crown Castle International Corp.',
            'CL': 'Colgate-Palmolive Company',
            'EL': 'Estee Lauder Companies Inc.',
            'USB': 'U.S. Bancorp',
            'FISV': 'Fiserv Inc.',
            'BSX': 'Boston Scientific Corporation',
            'ICE': 'Intercontinental Exchange Inc.',
            'EOG': 'EOG Resources Inc.',
            'NSC': 'Norfolk Southern Corporation',
            'SHW': 'Sherwin-Williams Company',
            'FCX': 'Freeport-McMoRan Inc.',
            'D': 'Dominion Energy Inc.',
            'CME': 'CME Group Inc.',
            'PNC': 'PNC Financial Services Group Inc.',
            'APD': 'Air Products and Chemicals Inc.',
            'EMR': 'Emerson Electric Co.',
            'AON': 'Aon plc',
            'GE': 'General Electric Company',
            'COP': 'ConocoPhillips',
            'FDX': 'FedEx Corporation',
            'EQIX': 'Equinix Inc.',
            'CSX': 'CSX Corporation',
            'ITW': 'Illinois Tool Works Inc.',
            'MCO': 'Moody\'s Corporation',
            'APH': 'Amphenol Corporation',
            'WM': 'Waste Management Inc.',
            'ECL': 'Ecolab Inc.',
            'NOC': 'Northrop Grumman Corporation',
            'MAR': 'Marriott International Inc.',
            'ADP': 'Automatic Data Processing Inc.',
            'PSA': 'Public Storage',
            'DG': 'Dollar General Corporation',
            'ROP': 'Roper Technologies Inc.',
            'ROST': 'Ross Stores Inc.',
            'TJX': 'TJX Companies Inc.',
            'GM': 'General Motors Company',
            'GD': 'General Dynamics Corporation',
            'HUM': 'Humana Inc.',
            'BDX': 'Becton Dickinson and Company',
            'TFC': 'Truist Financial Corporation',
            'EW': 'Edwards Lifesciences Corporation',
            'SRE': 'Sempra Energy',
            'CMG': 'Chipotle Mexican Grill Inc.',
            'ORLY': 'O\'Reilly Automotive Inc.',
            'KMI': 'Kinder Morgan Inc.',
            'STZ': 'Constellation Brands Inc.',
            'MMC': 'Marsh & McLennan Companies Inc.',
            'ADM': 'Archer-Daniels-Midland Company',
            'OKE': 'ONEOK Inc.',
            'BK': 'Bank of New York Mellon Corporation',
            'AFL': 'AFLAC Incorporated',
            'PPG': 'PPG Industries Inc.',
            'KLAC': 'KLA Corporation',
            'A': 'Agilent Technologies Inc.',
            'TEL': 'TE Connectivity Ltd.',
            'GPN': 'Global Payments Inc.',
            'INFO': 'IHS Markit Ltd.',
            'AIG': 'American International Group Inc.',
            'MCK': 'McKesson Corporation',
            'COF': 'Capital One Financial Corporation',
            'SCHW': 'Charles Schwab Corporation',
            'YUM': 'Yum! Brands Inc.',
            'ALL': 'Allstate Corporation',
            'HCA': 'HCA Healthcare Inc.',
            'MSI': 'Motorola Solutions Inc.',
            'F': 'Ford Motor Company',
            'CARR': 'Carrier Global Corporation',
            'AEP': 'American Electric Power Company Inc.',
            'PSX': 'Phillips 66',
            'WMB': 'Williams Companies Inc.',
            'TRV': 'Travelers Companies Inc.',
            'DD': 'DuPont de Nemours Inc.',
            'O': 'Realty Income Corporation',
            'FAST': 'Fastenal Company',
            'PAYX': 'Paychex Inc.',
            'CTVA': 'Corteva Inc.',
            'PRU': 'Prudential Financial Inc.',
            'CMI': 'Cummins Inc.',
            'JCI': 'Johnson Controls International plc',
            'OTIS': 'Otis Worldwide Corporation',
            'EA': 'Electronic Arts Inc.',
            'KR': 'Kroger Company',
            'STT': 'State Street Corporation',
            'ROK': 'Rockwell Automation Inc.',
            'CTAS': 'Cintas Corporation',
            'MCHP': 'Microchip Technology Incorporated',
            'EXC': 'Exelon Corporation',
            'GLW': 'Corning Incorporated',
            'VRSK': 'Verisk Analytics Inc.',
            'PCAR': 'PACCAR Inc.',
            'WBA': 'Walgreens Boots Alliance Inc.',
            'AZO': 'AutoZone Inc.',
            'WELL': 'Welltower Inc.',
            'ED': 'Consolidated Edison Inc.',
            'CPRT': 'Copart Inc.',
            'MSCI': 'MSCI Inc.',
            'GWW': 'W.W. Grainger Inc.',
            'EFX': 'Equifax Inc.',
            'DLR': 'Digital Realty Trust Inc.',
            'AMT': 'American Tower Corporation',
            'XLNX': 'Xilinx Inc.',
            'SPG': 'Simon Property Group Inc.',
            'PEG': 'Public Service Enterprise Group Inc.',
            'ES': 'Eversource Energy',
            'HSY': 'Hershey Company',
            'IDXX': 'IDEXX Laboratories Inc.',
            'RSG': 'Republic Services Inc.',
            'VMC': 'Vulcan Materials Company',
            'AVB': 'AvalonBay Communities Inc.',
            'ALGN': 'Align Technology Inc.',
            'MLM': 'Martin Marietta Materials Inc.',
            'ETR': 'Entergy Corporation',
            'EIX': 'Edison International',
            'FE': 'FirstEnergy Corp.',
            'MNST': 'Monster Beverage Corporation',
            'HPQ': 'HP Inc.',
            'FRC': 'First Republic Bank',
            'ARE': 'Alexandria Real Estate Equities Inc.',
            'PPL': 'PPL Corporation',
            'EQR': 'Equity Residential',
            'AWK': 'American Water Works Company Inc.',
            'SYY': 'Sysco Corporation',
            'LHX': 'L3Harris Technologies Inc.',
            'DOW': 'Dow Inc.',
            'WEC': 'WEC Energy Group Inc.',
            'HLT': 'Hilton Worldwide Holdings Inc.',
            'XEL': 'Xcel Energy Inc.',
            'TROW': 'T. Rowe Price Group Inc.',
            'RMD': 'ResMed Inc.',
            'ANSS': 'ANSYS Inc.',
            'FTV': 'Fortive Corporation',
            'LYB': 'LyondellBasell Industries N.V.',
            'SLB': 'Schlumberger Limited',
            'DHI': 'D.R. Horton Inc.',
            'CTSH': 'Cognizant Technology Solutions Corporation',
            'TDG': 'TransDigm Group Incorporated',
            'CERN': 'Cerner Corporation',
            'ETN': 'Eaton Corporation plc',
            'FIS': 'Fidelity National Information Services Inc.',
            'BAX': 'Baxter International Inc.',
            'WY': 'Weyerhaeuser Company',
            'K': 'Kellogg Company',
            'ZBRA': 'Zebra Technologies Corporation',
            'DTE': 'DTE Energy Company',
            'LEN': 'Lennar Corporation',
            'PH': 'Parker-Hannifin Corporation',
            'CDNS': 'Cadence Design Systems Inc.',
            'PKI': 'PerkinElmer Inc.',
            'AME': 'AMETEK Inc.',
            'GIS': 'General Mills Inc.',
            'SWKS': 'Skyworks Solutions Inc.',
            'RJF': 'Raymond James Financial Inc.',
            'CLX': 'Clorox Company',
            'WST': 'West Pharmaceutical Services Inc.',
            'HPE': 'Hewlett Packard Enterprise Company',
            'AVY': 'Avery Dennison Corporation',
            'MTB': 'M&T Bank Corporation',
            'STE': 'STERIS plc',
            'PWR': 'Quanta Services Inc.',
            'KEYS': 'Keysight Technologies Inc.',
            'CNP': 'CenterPoint Energy Inc.',
            'ROL': 'Rollins Inc.',
            'NTRS': 'Northern Trust Corporation',
            'BRO': 'Brown & Brown Inc.',
            'RF': 'Regions Financial Corporation',
            'DRI': 'Darden Restaurants Inc.',
            'EXPD': 'Expeditors International of Washington Inc.',
            'ATO': 'Atmos Energy Corporation',
            'FITB': 'Fifth Third Bancorp',
            'AES': 'AES Corporation',
            'WAT': 'Waters Corporation',
            'VIAC': 'ViacomCBS Inc.',
            'CFG': 'Citizens Financial Group Inc.',
            'CHD': 'Church & Dwight Co. Inc.',
            'CAH': 'Cardinal Health Inc.',
            'HBAN': 'Huntington Bancshares Incorporated',
            'STX': 'Seagate Technology Holdings plc',
            'WAB': 'Westinghouse Air Brake Technologies Corporation',
            'WDC': 'Western Digital Corporation',
            'TSN': 'Tyson Foods Inc.',
            'LH': 'Laboratory Corporation of America Holdings',
            'MAA': 'Mid-America Apartment Communities Inc.',
            'ESS': 'Essex Property Trust Inc.',
            'UDR': 'UDR Inc.',
            'TYL': 'Tyler Technologies Inc.',
            'LUV': 'Southwest Airlines Co.'
        };

        function getCompanyName(symbol) {
            const cleanSymbol = symbol.replace('.T', '');
            
            // æ—¥æœ¬ã®éŠ˜æŸ„ã‚’ãƒã‚§ãƒƒã‚¯
            if (japaneseStocks[cleanSymbol]) {
                return japaneseStocks[cleanSymbol];
            }
            
            // ã‚¢ãƒ¡ãƒªã‚«ã®éŠ˜æŸ„ã‚’ãƒã‚§ãƒƒã‚¯
            if (americanStocks[symbol]) {
                return americanStocks[symbol];
            }
            
            return null;
        }

        function showCompanyName() {
            const symbol = document.getElementById('stockSymbol').value.trim().toUpperCase();
            const companyNameDiv = document.getElementById('companyName');
            
            if (symbol) {
                const companyName = getCompanyName(symbol);
                if (companyName) {
                    companyNameDiv.textContent = `ğŸ“Š ${companyName}`;
                    companyNameDiv.style.display = 'block';
                } else {
                    companyNameDiv.textContent = '';
                    companyNameDiv.style.display = 'none';
                }
            } else {
                companyNameDiv.textContent = '';
                companyNameDiv.style.display = 'none';
            }
        }

        async function analyzeStock() {
            const symbol = document.getElementById('stockSymbol').value.trim().toUpperCase();
            const period = document.getElementById('period').value;
            const interval = document.getElementById('interval').value;

            if (!symbol) {
                showError('éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            showLoading(true);
            hideError();
            hideResults();

            try {
                const data = await fetchStockData(symbol, period, interval);
                if (data && data.chart && data.chart.result && data.chart.result.length > 0) {
                    displayResults(data.chart.result[0], symbol);
                } else {
                    showError('æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                }
            } catch (error) {
                console.error('Error:', error);
                showError('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        async function fetchStockData(symbol, period, interval) {
            // Yahoo Finance APIã®ä»£æ›¿ã¨ã—ã¦ã€æ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
            // å®Ÿéš›ã®æœ¬æ ¼çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€é©åˆ‡ãªAPIã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
            return generateMockData(symbol, period, interval);
        }

        function generateMockData(symbol, period, interval) {
            const days = getPeriodDays(period);
            const timestamps = [];
            const prices = [];
            const volumes = [];
            
            const basePrice = Math.random() * 200 + 50; // 50-250ã®ç¯„å›²ã®åŸºæº–ä¾¡æ ¼
            let currentPrice = basePrice;
            
            const now = new Date();
            
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
                timestamps.push(Math.floor(date.getTime() / 1000));
                
                // ä¾¡æ ¼ã®å¤‰å‹•ã‚’æ¨¡æ“¬
                const change = (Math.random() - 0.5) * currentPrice * 0.05; // Â±5%ã®å¤‰å‹•
                currentPrice = Math.max(currentPrice + change, 1);
                
                prices.push({
                    open: currentPrice * (0.98 + Math.random() * 0.04),
                    high: currentPrice * (1.01 + Math.random() * 0.04),
                    low: currentPrice * (0.96 + Math.random() * 0.04),
                    close: currentPrice,
                    adjClose: currentPrice
                });
                
                volumes.push(Math.floor(Math.random() * 10000000 + 1000000));
            }

            return {
                chart: {
                    result: [{
                        meta: {
                            symbol: symbol,
                            regularMarketPrice: currentPrice,
                            chartPreviousClose: prices[0].close,
                            currency: 'USD'
                        },
                        timestamp: timestamps,
                        indicators: {
                            quote: [{
                                open: prices.map(p => p.open),
                                high: prices.map(p => p.high),
                                low: prices.map(p => p.low),
                                close: prices.map(p => p.close),
                                volume: volumes
                            }],
                            adjclose: [{
                                adjclose: prices.map(p => p.adjClose)
                            }]
                        }
                    }]
                }
            };
        }

        function getPeriodDays(period) {
            const periodMap = {
                '1d': 1,
                '5d': 5,
                '1mo': 30,
                '3mo': 90,
                '6mo': 180,
                '1y': 365,
                '2y': 730
            };
            return periodMap[period] || 30;
        }

        function displayResults(data, symbol) {
            const meta = data.meta;
            const quotes = data.indicators.quote[0];
            const timestamps = data.timestamp;

            // ä¾¡æ ¼ãƒãƒ£ãƒ¼ãƒˆã‚’è¡¨ç¤º
            displayPriceChart(timestamps, quotes.close, symbol);

            // ä¾¡æ ¼æƒ…å ±ã‚’è¡¨ç¤º
            displayPriceInfo(meta, quotes);

            // çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º
            displayStatsInfo(quotes);

            // ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã‚’è¡¨ç¤º
            displayTrendInfo(quotes);

            // ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‚’è¡¨ç¤º
            displayTechnicalInfo(quotes);

            document.getElementById('resultsSection').style.display = 'block';
        }

        function displayPriceChart(timestamps, prices, symbol) {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }

            const labels = timestamps.map(ts => new Date(ts * 1000).toLocaleDateString('ja-JP'));
            const companyName = getCompanyName(symbol);
            const chartTitle = companyName ? `${symbol} (${companyName}) æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆ` : `${symbol} æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆ`;
            
            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `${symbol} æ ªä¾¡`,
                        data: prices,
                        borderColor: '#4facfe',
                        backgroundColor: 'rgba(79, 172, 254, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: chartTitle
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'ä¾¡æ ¼ (USD)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'æ—¥ä»˜'
                            }
                        }
                    }
                }
            });
        }

        function displayPriceInfo(meta, quotes) {
            const currentPrice = meta.regularMarketPrice;
            const previousClose = meta.chartPreviousClose;
            const change = currentPrice - previousClose;
            const changePercent = (change / previousClose) * 100;

            const html = `
                <div class="stat-item">
                    <span>ç¾åœ¨ä¾¡æ ¼:</span>
                    <span class="stat-value">$${currentPrice.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>å‰æ—¥çµ‚å€¤:</span>
                    <span class="stat-value">$${previousClose.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>å¤‰å‹•é¡:</span>
                    <span class="stat-value ${change >= 0 ? 'positive' : 'negative'}">
                        ${change >= 0 ? '+' : ''}$${change.toFixed(2)}
                    </span>
                </div>
                <div class="stat-item">
                    <span>å¤‰å‹•ç‡:</span>
                    <span class="stat-value ${changePercent >= 0 ? 'positive' : 'negative'}">
                        ${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}%
                    </span>
                </div>
            `;
            
            document.getElementById('priceInfo').innerHTML = html;
        }

        function displayStatsInfo(quotes) {
            const prices = quotes.close.filter(p => p !== null);
            const volumes = quotes.volume.filter(v => v !== null);
            
            const highest = Math.max(...prices);
            const lowest = Math.min(...prices);
            const avgPrice = prices.reduce((a, b) => a + b, 0) / prices.length;
            const avgVolume = volumes.reduce((a, b) => a + b, 0) / volumes.length;

            const html = `
                <div class="stat-item">
                    <span>æœŸé–“æœ€é«˜å€¤:</span>
                    <span class="stat-value positive">$${highest.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>æœŸé–“æœ€å®‰å€¤:</span>
                    <span class="stat-value negative">$${lowest.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>å¹³å‡ä¾¡æ ¼:</span>
                    <span class="stat-value">$${avgPrice.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>å¹³å‡å‡ºæ¥é«˜:</span>
                    <span class="stat-value">${formatNumber(avgVolume)}</span>
                </div>
            `;
            
            document.getElementById('statsInfo').innerHTML = html;
        }

        function displayTrendInfo(quotes) {
            const prices = quotes.close.filter(p => p !== null);
            const recentPrices = prices.slice(-10);
            const olderPrices = prices.slice(-20, -10);
            
            const recentAvg = recentPrices.reduce((a, b) => a + b, 0) / recentPrices.length;
            const olderAvg = olderPrices.reduce((a, b) => a + b, 0) / olderPrices.length;
            
            const trendDirection = recentAvg > olderAvg ? 'ä¸Šæ˜‡' : 'ä¸‹é™';
            const trendClass = recentAvg > olderAvg ? 'positive' : 'negative';
            
            const volatility = calculateVolatility(prices);
            const momentum = calculateMomentum(prices);

            const html = `
                <div class="stat-item">
                    <span>ãƒˆãƒ¬ãƒ³ãƒ‰:</span>
                    <span class="stat-value ${trendClass}">${trendDirection}ãƒˆãƒ¬ãƒ³ãƒ‰</span>
                </div>
                <div class="stat-item">
                    <span>ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£:</span>
                    <span class="stat-value">${volatility.toFixed(2)}%</span>
                </div>
                <div class="stat-item">
                    <span>ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ :</span>
                    <span class="stat-value ${momentum >= 0 ? 'positive' : 'negative'}">
                        ${momentum >= 0 ? '+' : ''}${momentum.toFixed(2)}%
                    </span>
                </div>
            `;
            
            document.getElementById('trendInfo').innerHTML = html;
        }

        function displayTechnicalInfo(quotes) {
            const prices = quotes.close.filter(p => p !== null);
            
            const sma20 = calculateSMA(prices, 20);
            const sma50 = calculateSMA(prices, 50);
            const rsi = calculateRSI(prices);
            const currentPrice = prices[prices.length - 1];

            let signal = 'ä¸­ç«‹';
            let signalClass = '';
            
            if (currentPrice > sma20 && sma20 > sma50 && rsi < 70) {
                signal = 'è²·ã„ã‚·ã‚°ãƒŠãƒ«';
                signalClass = 'positive';
            } else if (currentPrice < sma20 && sma20 < sma50 && rsi > 30) {
                signal = 'å£²ã‚Šã‚·ã‚°ãƒŠãƒ«';
                signalClass = 'negative';
            }

            const html = `
                <div class="stat-item">
                    <span>20æ—¥ç§»å‹•å¹³å‡:</span>
                    <span class="stat-value">$${sma20.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>50æ—¥ç§»å‹•å¹³å‡:</span>
                    <span class="stat-value">$${sma50.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>RSI (14æ—¥):</span>
                    <span class="stat-value">${rsi.toFixed(2)}</span>
                </div>
                <div class="stat-item">
                    <span>æ¨å¥¨:</span>
                    <span class="stat-value ${signalClass}">${signal}</span>
                </div>
            `;
            
            document.getElementById('technicalInfo').innerHTML = html;
        }

        function calculateSMA(prices, period) {
            if (prices.length < period) return prices[prices.length - 1];
            const recentPrices = prices.slice(-period);
            return recentPrices.reduce((a, b) => a + b, 0) / period;
        }

        function calculateRSI(prices, period = 14) {
            if (prices.length < period + 1) return 50;
            
            let gains = 0;
            let losses = 0;
            
            for (let i = prices.length - period; i < prices.length; i++) {
                const change = prices[i] - prices[i - 1];
                if (change > 0) {
                    gains += change;
                } else {
                    losses -= change;
                }
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        function calculateVolatility(prices) {
            if (prices.length < 2) return 0;
            
            const returns = [];
            for (let i = 1; i < prices.length; i++) {
                returns.push((prices[i] - prices[i - 1]) / prices[i - 1]);
            }
            
            const avgReturn = returns.reduce((a, b) => a + b, 0) / returns.length;
            const variance = returns.reduce((acc, ret) => acc + Math.pow(ret - avgReturn, 2), 0) / returns.length;
            
            return Math.sqrt(variance) * Math.sqrt(252) * 100; // å¹´ç‡æ›ç®—
        }

        function calculateMomentum(prices) {
            if (prices.length < 10) return 0;
            const current = prices[prices.length - 1];
            const past = prices[prices.length - 10];
            return ((current - past) / past) * 100;
        }

        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            } else if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toFixed(0);
        }

        function showLoading(show) {
            document.getElementById('loadingDiv').style.display = show ? 'block' : 'none';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorDiv');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function hideError() {
            document.getElementById('errorDiv').style.display = 'none';
        }

        function hideResults() {
            document.getElementById('resultsSection').style.display = 'none';
        }

        // åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
        window.addEventListener('load', function() {
            showCompanyName(); // åˆæœŸå€¤ã®ä¼šç¤¾åã‚’è¡¨ç¤º
            analyzeStock();
        });
    </script>
</body>
</html>